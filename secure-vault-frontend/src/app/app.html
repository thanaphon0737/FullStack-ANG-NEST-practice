<div class="container">
  <header>
    <h1>ğŸ” Secure Customer Vault</h1>
    <p>Confidential Data Management System</p>
  </header>

  <div class="card">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Full Name</th>
          <th>Segment</th>
          <th>Last Accessed</th>
          <th>National ID (Secret)</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let c of customers">
          <td>{{ c.id }}</td>
          
          <td>
            <div class="user-info">
              <span class="name">{{ c.first_name }} {{ c.last_name }}</span>
              <span class="email">user{{ c.id }}@example.com</span>
            </div>
          </td>
          
          <td>
            <span class="badge" [class.vip]="c.segment === 'VIP'">
              {{ c.segment }}
            </span>
          </td>

          <td class="date-col">
            {{ c.last_accessed_at ? (c.last_accessed_at | date:'medium') : '-' }}
          </td>

          <td class="action-col">
            <span *ngIf="!c.has_secret" class="text-muted">No Data</span>

            <button 
              *ngIf="c.has_secret && !c.revealed_id" 
              (click)="onReveal(c)"
              [disabled]="c.isLoadingSecret"
              class="btn-reveal">
              
              <span *ngIf="c.isLoadingSecret">Loading...</span>
              <span *ngIf="!c.isLoadingSecret">ğŸ”’ Click to Reveal</span>
            </button>

            <span *ngIf="c.revealed_id" class="secret-data">
              {{ c.revealed_id }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>